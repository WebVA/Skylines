{% macro render_circling_performance(flight) -%}
<table class="table table-condensed">
  <tbody>
    <tr>
      <th></th>
      <th class='numeric'>{% trans %}Thermals{% endtrans %}<br/>{% trans %}Avg. vario{% endtrans %}</th>
      <th class='numeric'>{% trans %}Duration{% endtrans %}<br/>&Delta;H</th>
    </tr>
    {% with perf=flight.circling_performance -%}
      {% if perf.total %}{{ circling_performance_row(phase_formatter(perf.total)) }}{% endif %}
      {% if perf.left %}{{ circling_performance_row(phase_formatter(perf.left)) }}{% endif %}
      {% if perf.right %}{{ circling_performance_row(phase_formatter(perf.right)) }}{% endif %}
      {% if perf.mixed %}{{ circling_performance_row(phase_formatter(perf.mixed)) }}{% endif %}
    {%- endwith %}
  </tbody>
</table>
{%- endmacro %}

{% macro circling_performance_row(phase) -%}
<tr>
  <th>{{ phase.circling_direction }}</th>
  <td class='numeric'>{{ phase.count }}<br/>{{ phase.vario }}</td>
  <td class='numeric'><abbr title="{{ phase.fraction }}">{{ phase.duration }}</abbr><br/>{{ phase.alt_diff }}</td>
</tr>
{%- endmacro %}
