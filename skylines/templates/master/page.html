<?python
from tg.flash import flash as _flash

flash = _flash.pop_payload()
flash_class = ''

if flash:
    if flash['status'] == 'ok':
        flash_class = 'alert-info'
    elif flash['status'] == 'error':
        flash_class = 'alert-error'
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

  <xi:include href="master.html" />

<py:match path="head" once="true">
  <head py:attrs="select('@*')">
    <meta py:replace="select('*')"/>
    <title py:if="defined('title')">${title}</title>

    <script type="text/javascript" src="/static/bootstrap/js/bootstrap-alert.js"></script>
  </head>
</py:match>

<py:match path="body" once="true">
  <body py:attrs="select('@*')">
    ${topbar()}

    <div class="container">

      <div class="content">
        <py:if test="defined('title')">
        <div class="page-header">
          <h1>
            <span py:replace="title"/>
            <py:if test="defined('tagline')">
            <small><span py:replace="tagline"/></small>
            </py:if>
          </h1>
        </div>
        </py:if>

        <div class="row">
          <div class="span12">
            <div py:if="flash" class="alert ${flash_class}">
              <button class="close" data-dismiss="alert">Ã—</button>
              <strong py:if="flash_class == ''">Warning!</strong>
              <strong py:if="flash_class == 'error'">Error!</strong>
              ${flash.message}
            </div>

            <div py:replace="select('*|text()')"/>
          </div>
        </div>
      </div>

      <p class="footer">
        &copy; <a href="http://www.xcsoar.org/">The XCSoar Project</a> -
        <a href="${config.get('skylines.imprint_link')}">Imprint</a>
      </p>

   </div>
 
  </body>
</py:match>
</html>
