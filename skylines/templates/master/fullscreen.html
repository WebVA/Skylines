<?python
from tg.flash import flash as _flash

flash = _flash.pop_payload()
flash_class = ''

if flash:
    if flash['status'] == 'ok':
        flash_class = 'alert-info'
    elif flash['status'] == 'error':
        flash_class = 'alert-error'
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

  <xi:include href="master.html" />

<py:match path="head" once="true">
  <head py:attrs="select('@*')">
    <meta py:replace="select('*')"/>

    <script type="text/javascript" src="/static/bootstrap/js/bootstrap-alert.js"></script>
  </head>
</py:match>

<py:match path="body" once="true">
  <body py:attrs="select('@*')">
    ${topbar()}

    <div py:replace="select('*|text()')"/>

    <div py:if="flash" class="alert alert-floating ${flash_class}">
      <button class="close" data-dismiss="alert">Ã—</button>
      <strong py:if="flash_class == ''">Warning!</strong>
      <strong py:if="flash_class == 'error'">Error!</strong>
      ${flash.message}
    </div>
  </body>
</py:match>
</html>
